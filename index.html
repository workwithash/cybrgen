<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBRGEN: Cybersecurity Services</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font: Inter (Google Fonts) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            /* Prevent horizontal scrolling */
            background-color: #f9fafb;
            /* bg-gray-50 from Tailwind, slightly warmer */
        }

        .container {
            max-width: 1280px;
            /* Slightly wider container for more breathing room */
            margin-left: auto;
            margin-right: auto;
            padding-left: 1.5rem;
            /* px-6 */
            padding-right: 1.5rem;
            /* px-6 */
        }

        @media (min-width: 1024px) {

            /* lg breakpoint */
            .container {
                padding-left: 2rem;
                /* lg:px-8 */
                padding-right: 2rem;
                /* lg:px-8 */
            }
        }

        /* Custom CSS for animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            /* More pronounced initial translate */
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.9s ease-out forwards;
            /* Slightly longer, smoother animation */
            animation-delay: var(--animation-delay, 0s);
            /* Allow delay per element */
        }

        @keyframes marquee {
            0% {
                transform: translateX(0%);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .marquee {
            animation: marquee 35s linear infinite;
            /* Adjust speed as needed, slightly slower */
        }

        /* Services Section Specifics (refined for multi-level accordion) */
        .category-details,
        .service-item-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), padding 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Smoother cubic-bezier */
            padding: 0 1.5rem;
            /* Initial padding for category details */
        }

        .category-details.open {
            max-height: 1500px;
            /* Increased for potentially very long lists */
            padding: 1.5rem;
        }

        .service-item-details.open {
            max-height: 700px;
            /* Increased for longer sub-service details */
            padding-top: 0.75rem;
            /* pt-3 */
            padding-bottom: 0.75rem;
            /* pb-3 */
            padding-left: 1rem;
            /* px-4 */
            padding-right: 1rem;
            /* px-4 */
        }

        /* Smooth scrolling for anchor links */
        html {
            scroll-behavior: smooth;
        }

        /* Styles for section titles, more pronounced underline */
        .section-title {
            position: relative;
            padding-bottom: 12px;
            /* More space for the underline */
            display: inline-block;
            /* Ensure it wraps around text */
        }

        .section-title::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            width: 80px;
            /* Longer underline */
            height: 5px;
            /* Thicker underline */
            background-color: #2563eb;
            /* Tailwind's blue-600 for a stronger accent */
            border-radius: 9999px;
            /* Rounded ends */
            transform: translateX(-50%);
            /* Center */
        }

        /* Modal Overlay & Content Styling - adjusted for slightly stronger visual hierarchy */
        .modal-overlay {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.6);
            /* Darker overlay */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 999;
            opacity: 0;
            transition: opacity 0.4s ease-out;
            /* Slightly slower transition */
            pointer-events: none;
        }

        .modal-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            background-color: white;
            border-radius: 1rem;
            /* More rounded corners: rounded-xl */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            /* More subtle, layered shadow */
            width: 100%;
            max-width: 56rem;
            /* max-w-4xl for larger modals */
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.95) translateY(20px);
            /* Slight scale and move for entry */
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .modal-overlay.show .modal-content {
            transform: scale(1) translateY(0);
        }

        /* Custom scrollbar for better aesthetics */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            /* slate-300 */
            border-radius: 10px;
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
            /* slate-400 */
        }

        /* Enhancements for prose styling within AI results/modal content */
        .prose p {
            margin-bottom: 1em;
            line-height: 1.6;
        }

        .prose ul {
            list-style-type: disc;
            margin-left: 1.5em;
            margin-bottom: 1em;
        }

        .prose strong {
            font-weight: 600;
            /* semibold */
        }

        /* Hamburger Menu Animations */
        #mobile-menu-button {
            position: relative;
            width: 40px;
            /* Increased size */
            height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 60;
            /* Ensure it's above menu when open */
            transition: transform 0.3s ease-out;
            /* Explicitly hidden by default, shown only on small screens */
            display: none;
            /* hidden by default */
        }

        /* Show only on screens smaller than md breakpoint (which is 768px by default) */
        @media (max-width: 767px) {
            #mobile-menu-button {
                display: flex;
                /* Show as flex on small screens */
            }
        }

        .hamburger-line {
            display: block;
            width: 28px;
            /* Line width */
            height: 3px;
            /* Line height */
            background-color: #475569;
            /* slate-600 */
            border-radius: 2px;
            transition: all 0.3s ease-in-out;
            margin-bottom: 5px;
            /* Spacing between lines */
        }

        .hamburger-line:last-child {
            margin-bottom: 0;
        }

        /* Animation for X transform */
        #mobile-menu-button.menu-open .hamburger-line:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        #mobile-menu-button.menu-open .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        #mobile-menu-button.menu-open .hamburger-line:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        /* Mobile Menu Panel Animation */
        #mobile-menu {
            position: fixed;
            top: 0;
            right: 0;
            width: 80%;
            /* Adjust width as needed */
            max-width: 320px;
            /* Max width for larger mobiles/tablets */
            height: 100vh;
            background-color: #ffffff;
            /* White background */
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.1);
            /* Stronger shadow */
            transform: translateX(100%);
            /* Start off-screen */
            transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0.4s;
            opacity: 0;
            visibility: hidden;
            padding-top: 80px;
            /* Space for fixed header */
            overflow-y: auto;
            /* Allow scrolling for long menus */
            /* Explicitly hidden by default, shown only on small screens */
            display: none;
            /* hidden by default */
        }

        /* Show only on screens smaller than md breakpoint */
        @media (max-width: 767px) {
            #mobile-menu {
                display: block;
                /* Show as block on small screens */
            }
        }

        #mobile-menu.open {
            transform: translateX(0%);
            /* Slide in */
            opacity: 1;
            visibility: visible;
        }

        /* Staggered animation for menu items */
        #mobile-menu a {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            transition-delay: var(--item-delay, 0s);
            /* Use custom property for stagger */
        }

        #mobile-menu.open a {
            opacity: 1;
            transform: translateY(0);
        }

        /* MODIFIED: Navigation Link Hover Effect (whole item hover) */
        .nav-link {
            position: relative;
            display: inline-block;
            text-decoration: none;
            /* Ensure no default underline */
            padding: 8px 12px;
            /* Add padding for the background effect */
            margin: -8px -12px;
            /* Counteract padding to maintain layout spacing */
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out, border-radius 0.3s ease-in-out;
            white-space: nowrap;
            /* Prevent text wrapping on hover */
            z-index: 1;
            /* Default z-index */
        }

        .nav-link:hover {
            background-color: #1d4ed8;
            /* Dark blue background (Tailwind blue-700) */
            color: white;
            /* White text on hover */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.2), 0 6px 10px -3px rgba(0, 0, 0, 0.1);
            /* More pronounced shadow */
            transform: translateY(-5px);
            /* More pronounced lift */
            z-index: 10;
            /* Bring to front on hover */
        }

        /* Ensure active section style overrides hover background */
        .nav-link.text-blue-700.font-semibold:hover {
            background-color: transparent;
            /* Remove hover background for active link */
            color: #1d4ed8;
            /* Maintain active blue color */
            box-shadow: none;
            transform: translateY(0);
            z-index: 1;
            /* Reset z-index for active link */
        }

        /* NEW: Styles for the dynamic navbar behavior */
        .header-hidden {
            transform: translateY(-100%);
            transition: transform 0.3s ease-in-out;
        }

        .header-visible {
            transform: translateY(0);
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>

<body class="bg-gray-50">

    <!-- NOTE: You MUST replace YOUR_ACTUAL_GEMINI_API_KEY_HERE with your real Google Gemini API Key. -->
    <!-- For this single HTML file, we use a global window variable for simplicity. -->
    <script>
        window.GEMINI_API_KEY = "YOUR_ACTUAL_GEMINI_API_KEY_HERE";
    </script>

    <header id="header" class="bg-white/95 backdrop-blur-lg sticky top-0 z-50 shadow-md header-visible">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="w-12">
                <img src="./src/LOGO.png" alt="">
            </a>
            <div class="hidden md:flex space-x-8">
                <!-- MODIFIED NAV LINKS FOR NEW HOVER EFFECT -->
                <a href="#about" class="nav-link text-slate-700 transition-colors duration-300 font-medium"
                    data-section="about">About Us</a>
                <a href="#testimonials" class="nav-link text-slate-700 transition-colors duration-300 font-medium"
                    data-section="testimonials">Testimonials</a>
                <a href="#services" class="nav-link text-slate-700 transition-colors duration-300 font-medium"
                    data-section="services">Services</a>
                <a href="#resources" class="nav-link text-slate-700 transition-colors duration-300 font-medium"
                    data-section="resources">Resources</a>
                <a href="#advisor" class="nav-link text-slate-700 transition-colors duration-300 font-medium"
                    data-section="advisor">Advisor</a>
                <a href="#contact" class="nav-link text-slate-700 transition-colors duration-300 font-medium"
                    data-section="contact">Contact Us</a>
            </div>
            <a href="#contact"
                class="hidden md:block bg-blue-700 text-white px-6 py-2.5 rounded-full font-semibold hover:bg-blue-800 transition-all duration-300 shadow-lg hover:scale-105">
                Get in Touch
            </a>
            <button id="mobile-menu-button"
                class="text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </nav>
        <div id="mobile-menu">
            <a href="#about" class="block py-3 px-6 text-base text-slate-700 hover:bg-blue-50 border-b border-slate-100"
                data-section="about" style="--item-delay: 0.05s;">About Us</a>
            <a href="#testimonials"
                class="block py-3 px-6 text-base text-slate-700 hover:bg-blue-50 border-b border-slate-100"
                data-section="testimonials" style="--item-delay: 0.10s;">Testimonials</a>
            <a href="#services"
                class="block py-3 px-6 text-base text-slate-700 hover:bg-blue-50 border-b border-slate-100"
                data-section="services" style="--item-delay: 0.15s;">Services</a>
            <a href="#resources"
                class="block py-3 px-6 text-base text-slate-700 hover:bg-blue-50 border-b border-slate-100"
                data-section="resources" style="--item-delay: 0.20s;">Resources</a>
            <a href="#advisor"
                class="block py-3 px-6 text-base text-slate-700 hover:bg-blue-50 border-b border-slate-100"
                data-section="advisor" style="--item-delay: 0.25s;">Advisor</a>
            <a href="#contact"
                class="block py-3 px-6 text-base text-slate-700 hover:bg-blue-50 border-b border-slate-100 last:border-b-0"
                data-section="contact" style="--item-delay: 0.30s;">Contact Us</a>
        </div>
    </header>

    <main>
        <section id="home"
            class="relative min-h-[calc(100vh-80px)] flex items-center bg-white overflow-hidden py-20 sm:py-28">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-100 to-indigo-200"
                style="clip-path: polygon(0 0, 100% 0, 100% 80%, 0 100%);"></div>
            <div class="container mx-auto px-6 text-center relative z-10 animate-fade-in">
                <h1
                    class="text-4xl sm:text-5xl md:text-7xl font-extrabold text-slate-900 leading-tight md:leading-snug drop-shadow-sm mb-6">
                    Innovate Securely.<br class="hidden md:block"> Build <span class="text-blue-700">Digital
                        Resilience.</span>
                </h1>
                <p class="mt-6 text-lg sm:text-xl text-slate-700 max-w-4xl mx-auto opacity-90">
                    Comprehensive, intelligent cybersecurity solutions tailored to empower your organization, navigate
                    regulatory landscapes with confidence, and foster secure growth.
                </p>
                <div class="mt-12 flex flex-col sm:flex-row justify-center gap-5">
                    <a href="#services"
                        class="bg-blue-700 text-white px-8 py-3.5 sm:px-10 sm:py-4 rounded-full font-semibold text-lg shadow-xl hover:bg-blue-800 transition-all duration-300 hover:scale-105 active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">Explore
                        Our Services</a>
                    <a href="#contact"
                        class="bg-white text-blue-700 border-2 border-blue-400 px-8 py-3.5 sm:px-10 sm:py-4 rounded-full font-semibold text-lg shadow-md hover:bg-blue-50 transition-all duration-300 hover:scale-105 active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">Request
                        a Consultation</a>
                </div>
            </div>
        </section>

        <section id="about" class="py-20 sm:py-28 bg-white opacity-0">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 sm:mb-20">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800 section-title inline-block">
                        About CYBRGEN</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mt-4 sm:mt-6 max-w-3xl mx-auto">We are your dedicated
                        partners in cyber resilience, committed to embedding security into the core of your operations.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-10 sm:gap-16 items-center">
                    <div class="animate-fade-in" style="--animation-delay: 0.1s;">
                        <h3 class="text-2xl sm:text-3xl font-semibold text-slate-800 mb-6 sm:mb-8">Our Vision, Mission &
                            Values</h3>
                        <div class="space-y-5 sm:space-y-6 text-slate-700 leading-relaxed mb-6 sm:mb-8">
                            <p class="text-base sm:text-lg"><strong>Vision:</strong> To be the APAC region's most
                                trusted and sought-after cybersecurity authority, empowering organizations to innovate
                                securely, navigate complex regulatory landscapes with confidence, and build enduring
                                digital resilience.</p>
                            <p class="text-base sm:text-lg"><strong>Mission:</strong> Our mission is to provide
                                comprehensive and specialized cybersecurity solutions, from offensive security and GRC
                                services to managed detection and response and vendor risk management. We focus on
                                delivering measurable security outcomes, fostering a strong security culture, and
                                enabling our clients across the APAC region to meet their strategic objectives with
                                cyber resilience and regulatory assurance.</p>
                            <p class="text-base sm:text-lg font-semibold text-slate-800">Our core values guide every
                                interaction:</p>
                            <ul class="list-disc list-inside space-y-2 text-slate-700 text-sm sm:text-base ml-4">
                                <li><strong>Excellence:</strong> Delivering high-quality, effective, and tailored
                                    solutions leveraging decades of Big 4 expertise.</li>
                                <li><strong>Empowerment:</strong> Supporting our clients to achieve their security and
                                    compliance goals confidently.</li>
                                <li><strong>Integrity:</strong> Upholding the highest ethical standards in all
                                    interactions and solutions provided.</li>
                                <li><strong>Collaboration:</strong> Working together with clients and within the team to
                                    achieve common goals.</li>
                                <li><strong>Customer Focus:</strong> Maintaining a client-centric approach to address
                                    specific needs and challenges effectively.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="relative p-8 sm:p-10 bg-blue-50 rounded-2xl shadow-xl overflow-hidden transform transition-all duration-500 hover:shadow-2xl hover:scale-[1.01] animate-fade-in"
                        style="--animation-delay: 0.2s;">
                        <div class="absolute inset-0 bg-gradient-to-tr from-blue-100 to-indigo-100 opacity-60"></div>
                        <div class="relative z-10 text-center">
                            <div class="text-7xl sm:text-8xl mb-6 sm:mb-8 transform rotate-6 inline-block opacity-70">🔒
                            </div>
                            <h3 class="text-3xl sm:text-4xl font-extrabold text-blue-800 mb-4 sm:mb-6">Your Security.
                                Our Priority.</h3>
                            <p class="text-lg sm:text-xl text-blue-700 mb-6 sm:mb-8">Partner with local experts who
                                understand the unique cybersecurity landscape of New Zealand and the APAC region.</p>
                            <a href="#contact"
                                class="bg-blue-700 text-white px-8 py-3.5 sm:px-10 sm:py-4 rounded-full font-semibold text-lg shadow-xl hover:bg-blue-800 transition-all duration-300 hover:scale-105 active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">Start
                                Securing Today</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="clientMarquee"
            class="py-12 sm:py-16 bg-gray-50 border-y border-gray-200 overflow-hidden opacity-0">
            <div class="text-center mb-10 sm:mb-12">
                <h3 class="text-2xl sm:text-3xl font-semibold text-slate-800">Trusted By Leading Organizations</h3>
            </div>
            <div class="relative w-full overflow-hidden whitespace-nowrap">
                <div class="inline-block marquee">
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏢
                        Enterprise Inc.</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏦
                        Global Bank</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🛍️
                        Retail Chain</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">💡
                        Tech Solutions</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏥
                        HealthCorp</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🚛
                        Logistics Co.</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">⚡
                        Energy Grid</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🔬
                        Research Lab</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🎓
                        EduTech</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏛️
                        Government Agency</span>
                    <!-- Duplicated for continuous scroll -->
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏢
                        Enterprise Inc.</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏦
                        Global Bank</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🛍️
                        Retail Chain</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">💡
                        Tech Solutions</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏥
                        HealthCorp</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🚛
                        Logistics Co.</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">⚡
                        Energy Grid</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🔬
                        Research Lab</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🎓
                        EduTech</span>
                    <span
                        class="inline-flex items-center mx-6 sm:mx-10 py-2.5 px-5 bg-white rounded-xl shadow-lg text-slate-700 text-base sm:text-xl font-medium border border-gray-100">🏛️
                        Government Agency</span>
                </div>
            </div>
        </section>

        <!-- NEW TESTIMONIALS SECTION -->
        <section id="testimonials" class="py-20 sm:py-28 bg-white opacity-0">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 sm:mb-20">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800 section-title inline-block">
                        What Our Clients Say</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mt-4 sm:mt-6 max-w-3xl mx-auto">Hear directly from the
                        organizations we've helped secure and empower.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-10">
                    <!-- Testimonial Card 1 -->
                    <div
                        class="bg-blue-50 p-6 sm:p-8 rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]">
                        <p class="text-base sm:text-lg text-blue-800 leading-relaxed italic mb-5 sm:mb-6">
                            "CYBRGEN's expertise in cloud security was invaluable. They not only identified critical
                            vulnerabilities but provided actionable strategies that significantly hardened our
                            infrastructure. Their team is professional and truly committed to our success."
                        </p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/50x50/ADD8E6/000000?text=JD" alt="Client Avatar"
                                class="w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-blue-200 shadow-md">
                            <div>
                                <p class="font-bold text-slate-800 text-base sm:text-lg">Jane Doe</p>
                                <p class="text-blue-700 text-xs sm:text-sm">CTO, TechInnovate Ltd.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Testimonial Card 2 -->
                    <div
                        class="bg-blue-50 p-6 sm:p-8 rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]">
                        <p class="text-base sm:text-lg text-blue-800 leading-relaxed italic mb-5 sm:mb-6">
                            "The phishing awareness training provided by CYBRGEN was incredibly engaging and effective.
                            Our employees are now much more vigilant, and we've seen a measurable reduction in
                            suspicious click rates. A fantastic investment!"
                        </p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/50x50/ADD8E6/000000?text=AM" alt="Client Avatar"
                                class="w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-blue-200 shadow-md">
                            <div>
                                <p class="font-bold text-slate-800 text-base sm:text-lg">Alex Miller</p>
                                <p class="text-blue-700 text-xs sm:text-sm">HR Director, GlobalCorp</p>
                            </div>
                        </div>
                    </div>

                    <!-- Testimonial Card 3 -->
                    <div
                        class="bg-blue-50 p-6 sm:p-8 rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]">
                        <p class="text-base sm:text-lg text-blue-800 leading-relaxed italic mb-5 sm:mb-6">
                            "As a small business, navigating cybersecurity compliance was daunting. CYBRGEN simplified
                            the entire process for us, helping us understand and meet our regulatory obligations without
                            overwhelming our resources. Highly recommend!"
                        </p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/50x50/ADD8E6/000000?text=SP" alt="Client Avatar"
                                class="w-12 h-12 sm:w-14 sm:h-14 rounded-full mr-3 sm:mr-4 border-2 border-blue-200 shadow-md">
                            <div>
                                <p class="font-bold text-slate-800 text-base sm:text-lg">Sarah Patel</p>
                                <p class="text-blue-700 text-xs sm:text-sm">CEO, Local Retail Co.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="services" class="py-20 sm:py-28 bg-gray-50 opacity-0">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 sm:mb-20">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800 section-title inline-block">Our
                        Comprehensive Services</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mt-4 sm:mt-6 max-w-3xl mx-auto">A complete suite of
                        services to cover every aspect of your organization's security posture. Explore our categories
                        to find the right solution for your needs.</p>
                </div>
                <div id="services-categories-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-10">
                    <!-- Service categories populated by JavaScript -->
                </div>
            </div>
        </section>

        <section id="resources" class="py-20 sm:py-28 bg-white opacity-0">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 sm:mb-20">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800 section-title inline-block">
                        Insights & Resources</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mt-4 sm:mt-6 max-w-3xl mx-auto">Stay informed with our
                        expert analysis, case studies, and guides on the evolving threat landscape. Learn from our
                        thought leadership to bolster your own security knowledge.</p>
                </div>
                <div id="resources-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-10">
                    <!-- Resource cards populated by JavaScript -->
                </div>

                <div
                    class="mt-20 sm:mt-28 max-w-4xl mx-auto bg-blue-50 p-6 sm:p-10 rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl">
                    <h3 class="text-2xl sm:text-3xl font-bold text-blue-800 mb-6 sm:mb-8">✨ AI-Powered Threat Explainer
                        ✨</h3>
                    <p class="text-base sm:text-lg text-blue-700 mb-4 sm:mb-6">Enter any cybersecurity term or concept,
                        and our AI will provide a concise, easy-to-understand explanation.</p>
                    <div class="flex flex-col sm:flex-row gap-4 sm:gap-5 mb-6 sm:mb-8">
                        <input type="text" id="threat-input" placeholder="e.g., 'Ransomware' or 'Zero Trust'"
                            class="flex-grow border border-blue-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-slate-400" />
                        <button id="explain-threat-button"
                            class="bg-blue-700 text-white px-6 py-2.5 sm:px-8 sm:py-3 rounded-lg font-semibold text-base sm:text-lg hover:bg-blue-800 transition-all duration-300 flex-shrink-0 shadow-md hover:scale-[1.02] active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">
                            Explain Threat
                        </button>
                    </div>
                    <div id="threat-loading" class="text-blue-700 text-center py-4 sm:py-6 text-base sm:text-lg hidden">
                        Loading explanation...
                    </div>
                    <div id="threat-result"
                        class="bg-white p-5 sm:p-6 rounded-lg border border-blue-100 text-slate-700 prose max-w-none shadow-inner hidden">
                    </div>
                </div>
            </div>
        </section>

        <section id="advisor" class="py-20 sm:py-28 bg-gray-100 opacity-0">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 sm:mb-20">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800 section-title inline-block">✨
                        Quick Security Advisor ✨</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mt-4 sm:mt-6 max-w-3xl mx-auto">Get personalized,
                        AI-driven cybersecurity recommendations tailored to your business profile and concerns.</p>
                </div>
                <div
                    class="max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-2xl shadow-xl transition-all duration-300 hover:shadow-xl">
                    <div class="grid sm:grid-cols-2 gap-6 sm:gap-8 mb-6 sm:mb-8">
                        <div>
                            <label for="company-size"
                                class="block text-sm sm:text-base font-medium text-slate-700 mb-1 sm:mb-2">Company
                                Size</label>
                            <select id="company-size"
                                class="block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                                <option value="small">Small (1-50 employees)</option>
                                <option value="medium">Medium (51-500 employees)</option>
                                <option value="large">Large (500+ employees)</option>
                            </select>
                        </div>
                        <div>
                            <label for="industry"
                                class="block text-sm sm:text-base font-medium text-slate-700 mb-1 sm:mb-2">Industry
                                Type</label>
                            <select id="industry"
                                class="block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                                <option value="e-commerce">E-commerce</option>
                                <option value="finance">Finance</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="tech">Tech</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="sm:col-span-2">
                            <label for="top-concern"
                                class="block text-sm sm:text-base font-medium text-slate-700 mb-1 sm:mb-2">Top Security
                                Concern</label>
                            <select id="top-concern"
                                class="block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                                <option value="phishing">Phishing/Email Attacks</option>
                                <option value="data-breaches">Data Breaches</option>
                                <option value="ransomware">Ransomware</option>
                                <option value="compliance">Regulatory Compliance</option>
                                <option value="general">General Security Posture</option>
                            </select>
                        </div>
                    </div>
                    <button id="generate-recommendations-button"
                        class="w-full bg-blue-700 text-white py-3 sm:py-3.5 px-6 sm:px-8 rounded-lg font-semibold text-base sm:text-lg hover:bg-blue-800 transition-all duration-300 shadow-md hover:scale-[1.02] active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">
                        Generate Recommendations
                    </button>
                    <div id="advisor-loading"
                        class="text-blue-700 text-center py-4 sm:py-6 text-base sm:text-lg hidden">
                        Generating recommendations...
                    </div>
                    <div id="advisor-result"
                        class="bg-gray-50 p-5 sm:p-6 rounded-lg border border-slate-200 text-slate-700 prose max-w-none mt-6 sm:mt-8 shadow-inner hidden">
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 sm:py-28 bg-gray-50 opacity-0">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 sm:mb-20">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800 section-title inline-block">Get
                        in Touch</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mt-4 sm:mt-6 max-w-3xl mx-auto">Ready to strengthen your
                        security? Let's talk about your challenges and how we can help.</p>
                </div>
                <div
                    class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8 sm:gap-12 bg-white p-6 sm:p-10 rounded-2xl shadow-xl transition-all duration-300 hover:shadow-xl">
                    <form onsubmit="event.preventDefault()">
                        <div class="space-y-6 sm:space-y-7">
                            <div>
                                <label for="name"
                                    class="text-sm sm:text-base font-medium text-slate-700 mb-1 sm:mb-2 block">Full
                                    Name</label>
                                <input type="text" id="name" name="name"
                                    class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-slate-400"
                                    placeholder="John Doe" />
                            </div>
                            <div>
                                <label for="email"
                                    class="text-sm sm:text-base font-medium text-slate-700 mb-1 sm:mb-2 block">Email
                                    Address</label>
                                <input type="email" id="email" name="email"
                                    class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-slate-400"
                                    placeholder="john.doe@example.com" />
                            </div>
                            <div>
                                <label for="message"
                                    class="text-sm sm:text-base font-medium text-slate-700 mb-1 sm:mb-2 block">Message</label>
                                <textarea id="message" name="message" rows="5"
                                    class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3.5 text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-slate-400"
                                    placeholder="Tell us about your cybersecurity needs..."></textarea>
                            </div>
                            <div>
                                <button type="submit"
                                    class="w-full bg-blue-700 text-white py-3 sm:py-3.5 px-6 sm:px-8 rounded-lg font-semibold text-base sm:text-lg hover:bg-blue-800 transition-all duration-300 shadow-md hover:scale-[1.02] active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">Send
                                    Message</button>
                            </div>
                        </div>
                    </form>
                    <div class="flex flex-col justify-center bg-gray-50 p-6 sm:p-8 rounded-xl border border-gray-200">
                        <h3 class="text-xl sm:text-2xl font-semibold text-slate-800 mb-5 sm:mb-6">Contact Information
                        </h3>
                        <p class="mt-2 text-slate-600 text-base sm:text-lg mb-6 sm:mb-8">Prefer to reach out directly?
                            We're here to help.</p>
                        <div class="mt-4 sm:mt-6 space-y-5 sm:space-y-6">
                            <div class="flex items-center">
                                <span class="text-blue-600 text-2xl sm:text-3xl mr-3 sm:mr-4 flex-shrink-0">✉️</span>
                                <div>
                                    <h4 class="font-semibold text-slate-700 text-base sm:text-lg">Email Us</h4>
                                    <a href="mailto:contact@cybrgen.nz"
                                        class="text-blue-700 hover:underline text-sm sm:text-base">contact@cybrgen.nz</a>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="text-blue-600 text-2xl sm:text-3xl mr-3 sm:mr-4 flex-shrink-0">📞</span>
                                <div>
                                    <h4 class="font-semibold text-slate-700 text-base sm:text-lg">Call Us</h4>
                                    <span class="text-slate-700 text-sm sm:text-base">(+64) 123 456 789</span>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="text-blue-600 text-2xl sm:text-3xl mr-3 sm:mr-4 flex-shrink-0">📍</span>
                                <div>
                                    <h4 class="font-semibold text-slate-700 text-base sm:text-lg">Our Location</h4>
                                    <span class="text-slate-700 text-sm sm:text-base">Auckland, New Zealand</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-900 text-slate-400 py-8">
        <div class="container mx-auto px-6 text-center">
            <p class="text-sm md:text-base">&copy; 2024 CYBRGEN. All Rights Reserved. </p>
            <div class="mt-4 space-x-4 text-sm md:text-base">
                <a href="#" class="hover:text-white transition-colors duration-200">Privacy Policy</a>
                <span class="text-slate-600">|</span>
                <a href="#" class="hover:text-white transition-colors duration-200">Terms of Service</a>
            </div>
        </div>
    </footer>

    <!-- Resource Modal Overlay -->
    <div id="resource-modal-overlay" class="modal-overlay">
        <div id="resource-modal-content" class="modal-content">
            <div id="modal-body-content"></div>
            <div class="p-6 pt-0 flex justify-end">
                <button id="modal-close-button"
                    class="bg-blue-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 shadow-md hover:scale-[1.02] active:scale-95 focus:outline-none focus:ring-4 focus:ring-blue-300">Close</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileNavLinks = document.querySelectorAll('#mobile-menu a');
            const sections = document.querySelectorAll('main section');
            const header = document.getElementById('header'); // Get the header element

            const servicesCategoriesGrid = document.getElementById('services-categories-grid');
            const resourcesGrid = document.getElementById('resources-grid');

            // AI Feature Elements
            const threatInput = document.getElementById('threat-input');
            const explainThreatButton = document.getElementById('explain-threat-button');
            const threatLoading = document.getElementById('threat-loading');
            const threatResult = document.getElementById('threat-result');

            const companySizeSelect = document.getElementById('company-size');
            const industrySelect = document.getElementById('industry');
            const topConcernSelect = document.getElementById('top-concern');
            const generateRecommendationsButton = document.getElementById('generate-recommendations-button');
            const advisorLoading = document.getElementById('advisor-loading');
            const advisorResult = document.getElementById('advisor-result');

            // Modal Elements
            const resourceModalOverlay = document.getElementById('resource-modal-overlay');
            const modalBodyContent = document.getElementById('modal-body-content');
            const modalCloseButton = document.getElementById('modal-close-button');


            // Data Definitions (derived from the provided documents)
            const serviceCategoriesData = [
                {
                    id: 'advisory-governance',
                    title: 'Cybersecurity Advisory & Governance',
                    icon: '💡',
                    description: 'Strategic guidance to build a resilient and compliant security posture aligned with your business objectives.',
                    services: [
                        {
                            title: 'Cybersecurity Strategy & Program Development',
                            details: [
                                'Developing and aligning cybersecurity strategy with business objectives.',
                                'Cybersecurity program design, maturity assessment, and roadmap development.',
                                'CISO-as-a-Service (vCISO) and strategic security leadership.',
                                'Cybersecurity investment planning and budget optimization.'
                            ]
                        },
                        {
                            title: 'Risk Management & Compliance',
                            details: [
                                'Enterprise-wide cyber risk assessments and threat modeling.',
                                'Development and implementation of risk management frameworks.',
                                'Regulatory compliance assessments and advisory (e.g., GDPR, CCPA, HIPAA, PCI DSS, industry-specific regulations).',
                                'Support for compliance audits (e.g., ISO 27001, SOC 2, NIST frameworks).',
                                'Business Continuity Management (BCM) and Disaster Recovery (DR) planning and advisory.'
                            ]
                        },
                        {
                            title: 'Policy, Standards & Framework Development',
                            details: [
                                'Custom cybersecurity policy, standard, and procedure development.',
                                'Framework implementation support (NIST CSF, ISO 27001, CIS Controls).',
                                'Acceptable Use Policy, Data Handling Policy, Incident Response Policy development.'
                            ]
                        },
                        {
                            title: 'Data Governance & Privacy Services',
                            details: [
                                'Data security governance framework development (classification, handling, retention, disposal).',
                                'Privacy program development and impact assessments (PIA/DPIA).',
                                'Advisory on data protection regulations and best practices.',
                                'Data discovery and classification services.'
                            ]
                        },
                        {
                            title: 'Third-Party Risk Management (TPRM) Program Services',
                            details: [
                                'Development and implementation of TPRM frameworks and processes.',
                                'Vendor risk assessment and due diligence services.',
                                'Contractual security requirements advisory for third parties.'
                            ]
                        },
                        {
                            title: 'Cybersecurity Culture & Human Factor Advisory',
                            details: [
                                'Assessing and improving cybersecurity culture.',
                                'Advisory on mitigating human error and insider risks.',
                                'Developing communication strategies for cybersecurity initiatives.'
                            ]
                        }
                    ]
                },
                {
                    id: 'assessment-testing',
                    title: 'Security Assessment & Testing Services',
                    icon: '�',
                    description: 'Simulate real-world attacks and perform comprehensive reviews to identify and exploit vulnerabilities before malicious actors can.',
                    services: [
                        {
                            title: 'Vulnerability Assessment & Penetration Testing (VAPT)',
                            details: [
                                'Network (internal/external) penetration testing.',
                                'Web application and mobile application penetration testing.',
                                'Wireless network security assessments.',
                                'API security testing.',
                                'IoT and OT device penetration testing.',
                                'Continuous vulnerability assessment services.'
                            ]
                        },
                        {
                            title: 'Application Security Testing',
                            details: [
                                'Static Application Security Testing (SAST) – code review.',
                                'Dynamic Application Security Testing (DAST).',
                                'Interactive Application Security Testing (IAST) implementation advisory.',
                                'Secure code review and developer guidance.'
                            ]
                        },
                        {
                            title: 'Cloud Security Posture Assessment (CSPA)',
                            details: [
                                'Security configuration reviews for IaaS, PaaS, SaaS environments (AWS, Azure, GCP).',
                                'Cloud security architecture reviews.',
                                'Container and Kubernetes security assessments.',
                                'Serverless architecture security reviews.'
                            ]
                        },
                        {
                            title: 'Network Security Architecture & Configuration Review',
                            details: [
                                'Firewall rule-base review and optimization.',
                                'Network segmentation effectiveness testing.',
                                'Secure network design validation.',
                                'IDS/IPS effectiveness review.'
                            ]
                        },
                        {
                            title: 'Compliance & Framework Gap Assessments',
                            details: [
                                'Gap analysis against specific regulations (e.g., PCI DSS, HIPAA) and frameworks (ISO 27001, NIST CSF).',
                                'Readiness assessments for certifications.'
                            ]
                        },
                        {
                            title: 'Adversary Simulation & Red Teaming',
                            details: [
                                'Objective-based red team operations.',
                                'Purple teaming exercises (collaborative attack/defense).',
                                'Assume breach assessments.'
                            ]
                        },
                        {
                            title: 'Social Engineering & Physical Security Assessments',
                            details: [
                                'Phishing, vishing, and smishing simulation campaigns.',
                                'Physical penetration testing (where appropriate and ethical).',
                                'Baiting and pretexting assessments.'
                            ]
                        },
                        {
                            title: 'Cryptography Assessment & Post-Quantum Readiness',
                            details: [
                                'Review of cryptographic implementations and key management.',
                                'Advisory and assessment for Post-Quantum Cryptography (PQC) transition.'
                            ]
                        }
                    ]
                },
                {
                    id: 'engineering-architecture',
                    title: 'Security Engineering & Architecture Services',
                    icon: '⚙️',
                    description: 'Designing and implementing robust security solutions from the ground up to protect your critical assets.',
                    services: [
                        {
                            title: 'Secure Network Architecture & Implementation',
                            details: [
                                'Design and deployment of secure network infrastructure (Zero Trust, segmentation).',
                                'Firewall, IDS/IPS, VPN, and other network security controls implementation.',
                                'Secure wireless network design and implementation.'
                            ]
                        },
                        {
                            title: 'Endpoint Security Solutions',
                            details: [
                                'Deployment and configuration of Endpoint Detection and Response (EDR) solutions.',
                                'Advanced malware protection and application whitelisting solutions.',
                                'Mobile Device Management (MDM) security configuration.'
                            ]
                        },
                        {
                            title: 'Cloud Security Engineering',
                            details: [
                                'Secure cloud architecture design and implementation (AWS, Azure, GCP).',
                                'Implementation of Cloud Access Security Brokers (CASB), Cloud Workload Protection Platforms (CWPP), and Secure Access Service Edge (SASE) solutions.',
                                'Security automation in cloud environments (DevSecOps for cloud).',
                                'Container and Kubernetes security hardening and implementation.'
                            ]
                        },
                        {
                            title: 'Identity & Access Management (IAM) Solutions',
                            details: [
                                'Design and implementation of IAM solutions (MFA, SSO, PAM, IGA).',
                                'Identity federation and directory services integration.',
                                'Role-Based Access Control (RBAC) design and implementation.'
                            ]
                        },
                        {
                            title: 'Data Security Solutions',
                            details: [
                                'Data Loss Prevention (DLP) strategy and solution implementation.',
                                'Encryption solutions design and implementation (full-disk, database, file-level, in-transit).',
                                'Key management solutions deployment.',
                                'Data masking and tokenization solutions.'
                            ]
                        },
                        {
                            title: 'Security Operations Center (SOC) Design & Enhancement',
                            details: [
                                'SOC strategy, design, and build services.',
                                'SIEM/SOAR platform selection, implementation, and tuning.',
                                'Threat intelligence platform integration.',
                                'Playbook development for incident response.'
                            ]
                        },
                        {
                            title: 'Secure Software Development Lifecycle (SSDLC) & DevSecOps Integration',
                            details: [
                                'Integrating security into DevOps pipelines (DevSecOps).',
                                'Secure coding standards and practices implementation.',
                                'Automation of security testing in CI/CD.',
                                'Threat modeling integration into the SDLC.'
                            ]
                        },
                        {
                            title: 'Securing Emerging Technologies',
                            details: [
                                'IoT and OT security architecture and controls implementation.',
                                'Security solutions for AI/ML environments.',
                                'Secure implementation of blockchain solutions.'
                            ]
                        }
                    ]
                },
                {
                    id: 'managed-security',
                    title: 'Managed Security Services (MSSP)',
                    icon: '🛡️',
                    description: 'Proactive, 24/7 monitoring and management of your security infrastructure to detect and respond to threats in real-time.',
                    services: [
                        {
                            title: 'Managed Detection & Response (MDR)',
                            details: [
                                '24/7 security monitoring, threat detection, and guided response.',
                                'Proactive threat hunting.',
                                'Endpoint, network, and cloud monitoring.'
                            ]
                        },
                        {
                            title: 'Managed SIEM & Security Analytics',
                            details: [
                                'Managed SIEM platform, including log collection, correlation, and analysis.',
                                'Custom alert development and tuning.',
                                'Regular security reporting and dashboards.'
                            ]
                        },
                        {
                            title: 'Managed Network Security',
                            details: [
                                'Managed firewall services (configuration, updates, monitoring).',
                                'Managed IDS/IPS services.',
                                'Managed Secure Web Gateway (SWG) and email security.'
                            ]
                        },
                        {
                            title: 'Managed Endpoint Security',
                            details: [
                                'Managed Endpoint Detection and Response (EDR) services.',
                                'Managed antivirus and anti-malware.',
                                'Endpoint security policy enforcement.'
                            ]
                        },
                        {
                            title: 'Vulnerability Management as a Service (VMaaS)',
                            details: [
                                'Continuous vulnerability scanning and reporting.',
                                'Prioritization of vulnerabilities based on risk.',
                                'Support for patch management coordination.'
                            ]
                        },
                        {
                            title: 'Managed Threat Intelligence',
                            details: [
                                'Curated threat intelligence feeds relevant to the client\'s industry and profile.',
                                'Proactive alerting on emerging threats.',
                                'Dark web monitoring.'
                            ]
                        },
                        {
                            title: 'Managed Cloud Security Posture Management (MCSPM)',
                            details: [
                                'Continuous monitoring of cloud security configurations.',
                                'Alerting on misconfigurations and compliance deviations.'
                            ]
                        },
                        {
                            title: 'Managed Application Security',
                            details: [
                                'Managed Web Application Firewall (WAF) services.',
                                'Continuous application security monitoring.'
                            ]
                        }
                    ]
                },
                {
                    id: 'incident-response',
                    title: 'Incident Response, Forensics & Crisis Management',
                    icon: '🧯',
                    description: 'Rapid response and expert investigation to minimize the impact of a security breach and aid recovery.',
                    services: [
                        {
                            title: 'Incident Response Preparedness & Retainer Services',
                            details: [
                                'Development and testing of Incident Response Plans (IRPs).',
                                'Tabletop exercises and simulation drills.',
                                'Incident response retainer for rapid deployment.'
                            ]
                        },
                        {
                            title: 'Emergency Cyber Incident Response',
                            details: [
                                '24/7 emergency response to security breaches and cyberattacks.',
                                'Incident containment, eradication, and recovery support.',
                                'Breach coaching and coordination with legal and PR.'
                            ]
                        },
                        {
                            title: 'Digital Forensics & Investigation',
                            details: [
                                'Computer, mobile, and network forensics.',
                                'Data breach investigation and root cause analysis.',
                                'E-discovery and litigation support.',
                                'Insider threat investigations.'
                            ]
                        },
                        {
                            title: 'Malware Analysis & Reverse Engineering',
                            details: [
                                'In-depth analysis of malicious software.',
                                'Understanding malware behavior and impact.',
                                'Developing custom signatures and indicators of compromise (IOCs).'
                            ]
                        },
                        {
                            title: 'Cyber Crisis Management & Communication Support',
                            details: [
                                'Strategic advisory during a cyber crisis.',
                                'Support for internal and external communications.',
                                'Post-incident review and lessons learned.'
                            ]
                        }
                    ]
                },
                {
                    id: 'training-awareness',
                    title: 'Cybersecurity Training & Awareness Programs',
                    icon: '🎓',
                    description: 'Empower your employees to be your first line of defense against cyber threats like phishing and social engineering.',
                    services: [
                        {
                            title: 'General Employee Security Awareness Training',
                            details: [
                                'Interactive training modules on common cyber threats (phishing, malware, password security).',
                                'Role-based security awareness training.',
                                'Ongoing awareness campaigns and materials.'
                            ]
                        },
                        {
                            title: 'Phishing Simulation & Targeted Training',
                            details: [
                                'Customized phishing simulation exercises.',
                                'Remedial training for users who fall victim to simulations.',
                                'Reporting and analytics on simulation effectiveness.'
                            ]
                        },
                        {
                            title: 'Secure Coding & Development Training',
                            details: [
                                'Training for software developers on secure coding practices (OWASP Top 10, language-specific security).',
                                'DevSecOps principles and practices training.'
                            ]
                        },
                        {
                            title: 'Executive & Board Cybersecurity Briefings',
                            details: [
                                'Tailored briefings on the cyber threat landscape, risk posture, and strategic initiatives for leadership.',
                                'Cyber crisis management training for executives.'
                            ]
                        },
                        {
                            title: 'Specialized Technical Cybersecurity Training',
                            details: [
                                'Training for IT and security staff on specific tools and techniques (e.g., SOC analyst training, forensics training, cloud security training).',
                                'Certification preparation courses.'
                            ]
                        },
                        {
                            title: 'Incident Response Team Training',
                            details: [
                                'Hands-on workshops and drills for internal incident response teams.'
                            ]
                        }
                    ]
                },
                {
                    id: 'specialized-tech-security',
                    title: 'Specialized Technology & Digital Security Services',
                    icon: '☁️',
                    description: 'Securing cutting-edge technologies and digital transformation initiatives.',
                    services: [
                        {
                            title: 'IoT & Operational Technology (OT) Security Services',
                            details: [
                                'Risk assessments for IoT and OT environments.',
                                'Security architecture design for converged IT/OT networks.',
                                'Implementation of security controls for industrial control systems (ICS) and SCADA.',
                                'Compliance advisory for OT-specific regulations.'
                            ]
                        },
                        {
                            title: 'Artificial Intelligence (AI) & Machine Learning (ML) Security Advisory',
                            details: [
                                'Security assessments of AI/ML models and platforms.',
                                'Advisory on securing data used for training AI models.',
                                'Ethical AI and bias mitigation from a security perspective.',
                                'Protecting against adversarial attacks on AI systems.'
                            ]
                        },
                        {
                            title: 'Blockchain & Distributed Ledger Technology (DLT) Security',
                            details: [
                                'Smart contract security audits.',
                                'Security assessments of blockchain implementations.'
                            ]
                        }
                    ]
                }
            ];

            const resourcesData = [
                {
                    type: 'Case Study',
                    title: 'Securing a Major NZ Retailer for PCI DSS Compliance',
                    excerpt: 'Discover how we helped a multi-location retailer achieve and maintain PCI DSS compliance, securing customer data and preventing costly fines.',
                    content: `
                        <div class="p-6 sm:p-8">
                            <h3 class="text-xl sm:text-2xl font-bold mb-2 text-slate-800">Case Study: Securing a Major NZ Retailer</h3>
                            <p class="text-xs sm:text-sm text-slate-500 mb-5 sm:mb-6">Topic: Compliance & Governance</p>
                            <div class="space-y-3 sm:space-y-4 text-slate-600 text-sm sm:text-base">
                                <p><strong>The Challenge:</strong> A prominent New Zealand retailer with multiple stores was facing an upcoming PCI DSS audit. Their existing infrastructure had grown organically over years, leading to inconsistent security controls and significant compliance gaps. They needed an expert partner to assess their environment and guide them to full compliance without disrupting business operations.</p>
                                <p><strong>Our Solution:</strong> Our consulting team performed a comprehensive gap analysis, identifying critical vulnerabilities in their payment processing systems and network segmentation. We developed a phased remediation roadmap, prioritizing the most urgent risks. This involved re-architecting parts of their network, implementing stronger access controls, and deploying a managed vulnerability scanning service.</p>
                                <p><strong>The Outcome:</strong> The client successfully passed their PCI DSS audit on the first attempt, avoiding potential fines and reputational damage. They now have a sustainable security program, supported by our ongoing managed services, ensuring they remain compliant and secure against future threats.</p>
                            </div>
                        </div>
                    `
                },
                {
                    type: 'Blog Post',
                    title: 'The Rise of AI-Powered Phishing Attacks',
                    excerpt: 'Artificial intelligence is making phishing scams more sophisticated than ever. Learn how to spot these advanced threats and protect your organization.',
                    content: `
                        <div class="p-6 sm:p-8">
                            <h3 class="text-xl sm:text-2xl font-bold mb-2 text-slate-800">Blog: The Rise of AI-Powered Phishing</h3>
                            <p class="text-xs sm:text-sm text-slate-500 mb-5 sm:mb-6">Topic: Threat Intelligence</p>
                            <div class="space-y-3 sm:space-y-4 text-slate-600 text-sm sm:text-base">
                                <p>Gone are the days of phishing emails filled with obvious spelling and grammar mistakes. Cybercriminals are now leveraging AI language models to craft highly convincing, personalized, and context-aware phishing messages. These attacks are harder to detect and can easily bypass traditional email filters.</p>
                                <p><strong>What makes them so dangerous?</strong> AI can analyze publicly available information to tailor emails to specific individuals, referencing recent projects, colleagues, or events to build credibility. The language is flawless, and the tone perfectly mimics legitimate business communication.</p>
                                <p><strong>How to Defend:</strong> A multi-layered approach is crucial. This includes advanced email security solutions that analyze for intent, not just keywords. Most importantly, continuous security awareness training is vital. Employees must be trained to be skeptical of any unexpected request, especially those involving financial transactions or sensitive data, regardless of how convincing the email appears.</p>
                            </div>
                        </div>
                    `
                },
                {
                    type: 'Whitepaper',
                    title: 'A Pragmatic Guide to Zero Trust Architecture',
                    excerpt: 'Moving beyond the buzzword. Our guide provides a step-by-step approach to implementing a Zero Trust security model in your organization.',
                    content: `
                        <div class="p-6 sm:p-8">
                            <h3 class="text-xl sm:text-2xl font-bold mb-2 text-slate-800">Whitepaper: A Pragmatic Guide to Zero Trust</h3>
                            <p class="text-xs sm:text-sm text-slate-500 mb-5 sm:mb-6">Topic: Security Strategy</p>
                            <div class="space-y-3 sm:space-y-4 text-slate-600 text-sm sm:text-base">
                                <p>Zero Trust is a security model that shifts defenses from static, network-based perimeters to focus on users, assets, and resources. It operates on the principle of "never trust, always verify." This guide breaks down the core pillars of a Zero Trust architecture:</p>
                                <ul>
                                    <li><strong>Identity:</strong> Implementing strong authentication and access controls.</li>
                                    <li><strong>Endpoints:</strong> Ensuring all devices are secure and monitored.</li>
                                    <li><strong>Network:</strong> Micro-segmentation to prevent lateral movement.</li>
                                    <li><strong>Data:</strong> Classifying and protecting data at its source.</li>
                                </ul>
                                <p>We provide a pragmatic roadmap for organizations to begin their Zero Trust journey, starting with small, high-impact changes and gradually building towards a more mature security posture.</p>
                            </div>
                        </div>
                    `
                },
            ];

            // Helper to get element and handle potential null
            const getEl = (id) => document.getElementById(id);

            // Header and Mobile Menu Logic
            mobileMenuButton.addEventListener('click', () => {
                mobileMenuButton.classList.toggle('menu-open'); // Toggle class for hamburger icon animation
                mobileMenu.classList.toggle('open'); // Toggle class for menu panel animation
            });

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenuButton.classList.remove('menu-open'); // Close icon
                    mobileMenu.classList.remove('open'); // Close menu
                });
            });

            // Dynamic Navbar Visibility on Scroll
            let lastScrollY = window.scrollY;
            const scrollThreshold = 50; // Pixels to scroll before hiding/showing

            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;

                if (currentScrollY > lastScrollY && currentScrollY > header.offsetHeight + scrollThreshold) {
                    // Scrolling down past the header height + threshold
                    header.classList.remove('header-visible');
                    header.classList.add('header-hidden');
                } else if (currentScrollY < lastScrollY) {
                    // Scrolling up
                    header.classList.remove('header-hidden');
                    header.classList.add('header-visible');
                }

                lastScrollY = currentScrollY;
            });


            // Intersection Observer for active section highlighting and fade-in
            let activeSectionId = 'home';

            const observerOptions = {
                rootMargin: "-50% 0px -50% 0px",
                threshold: 0,
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        activeSectionId = entry.target.id;
                        updateNavLinks();
                        entry.target.classList.add('animate-fade-in');
                        entry.target.classList.remove('opacity-0');
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                if (section.id !== 'home') {
                    section.classList.add('opacity-0');
                }
                observer.observe(section);
            });

            function updateNavLinks() {
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.dataset.section === activeSectionId) {
                        link.classList.add('text-blue-700', 'font-semibold'); /* Changed to blue-700 for active state */
                        link.classList.remove('text-slate-700');
                    } else {
                        link.classList.remove('text-blue-700', 'font-semibold');
                        link.classList.add('text-slate-700');
                    }
                });
                document.querySelectorAll('#mobile-menu a').forEach(link => {
                    if (link.dataset.section === activeSectionId) {
                        link.classList.add('text-blue-700', 'font-semibold'); /* Changed to blue-700 for active state */
                        link.classList.remove('text-slate-700');
                    } else {
                        link.classList.remove('text-blue-700', 'font-semibold');
                        link.classList.add('text-slate-700');
                    }
                });
            }
            updateNavLinks(); // Initial call for 'home'


            // Populate Services Categories Section
            function populateServiceCategories() {
                serviceCategoriesData.forEach(category => {
                    const categoryCardHtml = `
                        <div class="group border border-gray-200 rounded-2xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-[1.01] bg-white">
                            <div
                                class="category-card p-6 sm:p-8 pb-4 cursor-pointer flex flex-col justify-between h-full hover:bg-gray-50 transition-colors"
                                data-category-id="${category.id}"
                            >
                                <div>
                                    <div class="text-5xl sm:text-6xl mb-5 sm:mb-6 text-blue-600">${category.icon}</div>
                                    <h3 class="text-xl sm:text-2xl font-bold text-slate-800 mb-2 sm:mb-3">${category.title}</h3>
                                    <p class="text-sm sm:text-base text-slate-600 leading-relaxed">${category.description}</p>
                                </div>
                                <div class="mt-5 sm:mt-6 text-blue-700 group-hover:text-blue-800 font-semibold flex items-center justify-end">
                                    <span class="expand-indicator transition-transform duration-300 transform">Show Details &rarr;</span>
                                </div>
                            </div>
                            <div class="category-details bg-gray-50 rounded-b-2xl -mt-2 shadow-inner" id="category-detail-${category.id}">
                                <div class="space-y-3 sm:space-y-4 pt-3 sm:pt-4"> <!-- Added pt-4 for padding inside details -->
                                    ${category.services.map(service => `
                                        <div class="service-item border-b border-gray-100 last:border-b-0">
                                            <div class="service-item-header flex justify-between items-center py-3 sm:py-4 px-4 sm:px-6 cursor-pointer bg-white hover:bg-gray-100 rounded-lg transition-colors" data-service-item-id="${category.id}-${service.title.replace(/[^a-zA-Z0-9-]/g, '').replace(/\s+/g, '-').toLowerCase()}">
                                                <h4 class="font-semibold text-base sm:text-lg text-slate-700">${service.title}</h4>
                                                <span class="text-blue-600 text-lg sm:text-xl transform transition-transform duration-300">›</span>
                                            </div>
                                            <div class="service-item-details bg-gray-50" id="service-item-detail-${category.id}-${service.title.replace(/[^a-zA-Z0-9-]/g, '').replace(/\s+/g, '-').toLowerCase()}">
                                                <ul class="list-disc list-inside space-y-1 sm:space-y-2 text-slate-600 text-xs sm:text-sm pl-6 sm:pl-8 pr-3 sm:pr-4 py-3 sm:py-4">
                                                    ${service.details.map(detail => `<li>${detail}</li>`).join('')}
                                                </ul>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    servicesCategoriesGrid.insertAdjacentHTML('beforeend', categoryCardHtml);
                });

                document.querySelectorAll('.category-card').forEach(card => {
                    card.addEventListener('click', (event) => {
                        const categoryId = event.currentTarget.dataset.categoryId;
                        const detailElement = getEl(`category-detail-${categoryId}`);
                        const expandIndicator = event.currentTarget.querySelector('.expand-indicator');

                        const wasOpen = detailElement.classList.contains('open');

                        // Close any other open category details
                        document.querySelectorAll('.category-details.open').forEach(openDetail => {
                            if (openDetail.id !== `category-detail-${categoryId}`) {
                                openDetail.classList.remove('open');
                                openDetail.previousElementSibling.classList.remove('ring-2', 'ring-blue-500', 'shadow-inner'); /* Removed shadow-inner from card */
                                openDetail.previousElementSibling.querySelector('.expand-indicator').textContent = 'Show Details →';
                                openDetail.previousElementSibling.querySelector('.expand-indicator').classList.remove('rotate-90');
                            }
                        });

                        detailElement.classList.toggle('open');
                        event.currentTarget.classList.toggle('ring-2');
                        event.currentTarget.classList.toggle('ring-blue-500');
                        event.currentTarget.classList.toggle('shadow-inner'); /* Add inner shadow to card when open */

                        if (wasOpen) {
                            expandIndicator.textContent = 'Show Details →';
                            expandIndicator.classList.remove('rotate-90');
                        } else {
                            expandIndicator.textContent = 'Hide Details ↑';
                            expandIndicator.classList.add('rotate-90');
                        }


                        // Close all sub-service details when a category is toggled
                        document.querySelectorAll('.service-item-details.open').forEach(subDetail => {
                            subDetail.classList.remove('open');
                            subDetail.previousElementSibling.querySelector('span').textContent = '›';
                            subDetail.previousElementSibling.querySelector('span').classList.remove('rotate-90');
                        });
                    });
                });

                document.querySelectorAll('.service-item-header').forEach(header => {
                    header.addEventListener('click', (event) => {
                        event.stopPropagation(); // Prevent category card from toggling
                        const serviceItemId = event.currentTarget.dataset.serviceItemId;
                        const detailElement = getEl(`service-item-detail-${serviceItemId}`);
                        const arrowSpan = event.currentTarget.querySelector('span');

                        const wasOpen = detailElement.classList.contains('open');

                        // Close any other open service items within the same category
                        event.currentTarget.closest('.category-details').querySelectorAll('.service-item-details.open').forEach(openSubDetail => {
                            if (openSubDetail.id !== `service-item-detail-${serviceItemId}`) {
                                openSubDetail.classList.remove('open');
                                openSubDetail.previousElementSibling.querySelector('span').textContent = '›';
                                openSubDetail.previousElementSibling.querySelector('span').classList.remove('rotate-90');
                            }
                        });


                        detailElement.classList.toggle('open');
                        if (wasOpen) {
                            arrowSpan.textContent = '›';
                            arrowSpan.classList.remove('rotate-90');
                        } else {
                            arrowSpan.textContent = '˅';
                            arrowSpan.classList.add('rotate-90');
                        }
                    });
                });
            }
            populateServiceCategories();


            // Populate Resources Section
            function populateResources() {
                resourcesData.forEach(resource => {
                    const resourceCardHtml = `
                        <div class="bg-gray-50 rounded-xl shadow-lg overflow-hidden flex flex-col transition-all duration-300 hover:shadow-xl hover:scale-[1.01] border border-gray-100">
                            <div class="p-4 sm:p-6 flex-grow">
                                <p class="text-xs sm:text-sm font-semibold text-blue-600 mb-1 tracking-wider uppercase">${resource.type}</p>
                                <h3 class="text-base sm:text-lg font-bold text-slate-800 mb-2">${resource.title}</h3>
                                <p class="text-sm text-slate-600 leading-relaxed">${resource.excerpt}</p>
                            </div>
                            <div class="p-4 sm:p-6 bg-gray-100">
                                <button
                                    class="read-more-button font-semibold text-blue-700 hover:text-blue-800 flex items-center gap-1 sm:gap-2 transition-colors duration-200"
                                    data-content='${encodeURIComponent(resource.content)}'
                                >
                                    Read More <span class="text-lg sm:text-xl">&rarr;</span>
                                </button>
                            </div>
                        </div>
                    `;
                    resourcesGrid.insertAdjacentHTML('beforeend', resourceCardHtml);
                });

                document.querySelectorAll('.read-more-button').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const encodedContent = event.currentTarget.dataset.content;
                        const decodedContent = decodeURIComponent(encodedContent);
                        modalBodyContent.innerHTML = decodedContent;
                        resourceModalOverlay.classList.add('show');
                    });
                });

                modalCloseButton.addEventListener('click', () => {
                    resourceModalOverlay.classList.remove('show');
                    modalBodyContent.innerHTML = ''; // Clear content on close
                });
            }
            populateResources();


            // AI-Powered Threat Explainer Logic
            explainThreatButton.addEventListener('click', async () => {
                const query = threatInput.value.trim();
                if (!query) {
                    threatResult.innerHTML = '<p class="text-red-500 font-medium">Please enter a cybersecurity term.</p>';
                    threatResult.classList.remove('hidden');
                    return;
                }

                threatLoading.classList.remove('hidden');
                threatResult.classList.add('hidden');
                threatResult.innerHTML = '';

                try {
                    const apiKey = window.GEMINI_API_KEY; // Accessing global API key
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    const chatHistory = [{ role: "user", parts: [{ text: `Explain the cybersecurity term "${query}" concisely and in simple terms.` }] }];
                    const payload = { contents: chatHistory };

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const apiResult = await response.json();

                    if (apiResult.candidates && apiResult.candidates.length > 0 &&
                        apiResult.candidates[0].content && apiResult.candidates[0].content.parts &&
                        apiResult.candidates[0].content.parts.length > 0) {
                        const text = apiResult.candidates[0].content.parts[0].text;
                        threatResult.innerHTML = `<p>${text}</p>`;
                    } else {
                        threatResult.innerHTML = '<p class="text-red-500 font-medium">Could not retrieve an explanation. Please try again.</p>';
                    }
                } catch (error) {
                    threatResult.innerHTML = `<p class="text-red-500 font-medium">An error occurred: ${error.message}</p>`;
                } finally {
                    threatLoading.classList.add('hidden');
                    threatResult.classList.remove('hidden');
                }
            });

            // AI-Powered Security Advisor Logic
            generateRecommendationsButton.addEventListener('click', async () => {
                const companySize = companySizeSelect.value;
                const industry = industrySelect.value;
                const topConcern = topConcernSelect.value;

                advisorLoading.classList.remove('hidden');
                advisorResult.classList.add('hidden');
                advisorResult.innerHTML = '';

                try {
                    const apiKey = window.GEMINI_API_KEY; // Accessing global API key
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    const prompt = `As a cybersecurity expert, provide 3-5 high-level security recommendations for a ${companySize} company in the ${industry} industry, whose top concern is ${topConcern}. Focus on practical, actionable advice. Format as a bulleted list.`;

                    const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const apiResult = await response.json();

                    if (apiResult.candidates && apiResult.candidates.length > 0 &&
                        apiResult.candidates[0].content && apiResult.candidates[0].content.parts &&
                        apiResult.candidates[0].content.parts.length > 0) {
                        const text = apiResult.candidates[0].content.parts[0].text;
                        advisorResult.innerHTML = `<p>${text}</p>`;
                    } else {
                        advisorResult.innerHTML = '<p class="text-red-500 font-medium">Could not generate recommendations. Please try again.</p>';
                    }
                } catch (error) {
                    advisorResult.innerHTML = `<p class="text-red-500 font-medium">An error occurred: ${error.message}</p>`;
                } finally {
                    advisorLoading.classList.add('hidden');
                    advisorResult.classList.remove('hidden');
                }
            });

            // Attach event listeners for smooth scrolling on navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>

</html>